(function(){"use strict";function e(e,t,r){this.path=e,this.matcher=t,this.delegate=r}function t(e){this.routes={},this.children={},this.target=e}function r(t,n,a){return function(i,o){var h=t+i;return o?void o(r(h,n,a)):new e(t+i,n,a)}}function n(e,t,r){for(var n=0,a=0;a<e.length;a++)n+=e[a].path.length;t=t.substr(n);var i={path:t,handler:r};e.push(i)}function a(e,t,r,i){var o=t.routes;for(var h in o)if(o.hasOwnProperty(h)){var s=e.slice();n(s,h,o[h]),t.children[h]?a(s,t.children[h],r,i):r.call(i,s)}}function i(e){return e.toUpperCase()}function o(e){return e.replace(A,i)}function h(e){return e.split("/").map(c).join("/")}function s(e){return e.charCodeAt(0).toString(16).toUpperCase()}function u(e,t){if(-1===e.indexOf("%"))return e;e=o(e);for(var r="",n="",a=0;a<e.length;){var i=e.indexOf("%",a);if(-1===i){n+=e.slice(a);break}n+=e.slice(a,i),a=i+3;var h=e.slice(i+1,i+3),s="%"+h;-1===t.indexOf(h)?n+=s:(r+=decodeURIComponent(n),n="",r+=s)}return r+=decodeURIComponent(n)}function c(e){return u(e,D)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){this.string=P(e)}function f(e){this.name=P(e)}function p(e){this.name=e}function v(){}function g(e,t,r,n){"/"===e.charAt(0)&&(e=e.substr(1));var a=e.split("/"),i=new Array(a.length);r.val="";for(var o=0;o<a.length;o++){var h,s=a[o];(h=s.match(/^:([^\/]+)$/))?(i[o]=new f(h[1]),t.push(h[1]),n.push(!0),r.val+="3"):(h=s.match(/^\*([^\/]+)$/))?(i[o]=new p(h[1]),t.push(h[1]),n.push(!1),r.val+="1"):""===s?(i[o]=new v,r.val+="2"):(i[o]=new d(s),r.val+="4")}return r.val=+r.val,i}function m(e){this.charSpec=e,this.nextStates=[],this.charSpecs={},this.regex=void 0,this.handlers=void 0,this.specificity=void 0}function C(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function y(e,t){for(var r=[],n=0,a=e.length;a>n;n++){var i=e[n];r=r.concat(i.match(t))}return r}function S(e){this.queryParams=e||{}}function E(e,t,r){var n=e.handlers,a=e.regex,i=t.match(a),o=1,h=new S(r);h.length=n.length;for(var s=0;s<n.length;s++){for(var u,c,l,d=n[s],f=d.names,p=d.shouldDecodes,v={},g=0;g<f.length;g++)u=f[g],c=p[g],l=i[o++],T.ENCODE_AND_DECODE_PATH_SEGMENTS&&c?v[u]=decodeURIComponent(l):v[u]=l;h[s]={handler:d.handler,params:v,isDynamic:!!f.length}}return h}function x(e){e=e.replace(/\+/gm,"%20");var t;try{t=decodeURIComponent(e)}catch(r){t=""}return t}e.prototype={to:function(e,t){var r=this.delegate;if(r&&r.willAddRoute&&(e=r.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,n,a,i){var o=new t(n);this.children[e]=o;var h=r(e,o,i);i&&i.contextEntered&&i.contextEntered(n,h),a(h)}};var w=function(e,n){var i=new t;e(r("",i,this.delegate)),a([],i,function(e){n?n(this,e):this.add(e)},this)},A=/%[a-fA-F0-9]{2}/g,O=["%","/"],D=O.map(s),R={normalizeSegment:c,normalizePath:h},_=R,N=_.normalizePath,P=_.normalizeSegment,U=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],b=new RegExp("(\\"+U.join("|\\")+")","g");d.prototype={eachChar:function(e){for(var t,r=this.string,n=0;n<r.length;n++)t=r.charAt(n),e=e.put({invalidChars:void 0,repeat:!1,validChars:t});return e},regex:function(){return this.string.replace(b,"\\$1")},generate:function(){return this.string}},f.prototype={eachChar:function(e){return e.put({invalidChars:"/",repeat:!0,validChars:void 0})},regex:function(){return"([^/]+)"},generate:function(e){return T.ENCODE_AND_DECODE_PATH_SEGMENTS?encodeURIComponent(e[this.name]):e[this.name]}},p.prototype={eachChar:function(e){return e.put({invalidChars:"",repeat:!0,validChars:void 0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},v.prototype={eachChar:function(e){return e},regex:function(){return""},generate:function(){return""}},m.prototype={get:function(e){if(this.charSpecs[e.validChars])return this.charSpecs[e.validChars];for(var t=this.nextStates,r=0;r<t.length;r++){var n=t[r],a=n.charSpec.validChars===e.validChars;if(a=a&&n.charSpec.invalidChars===e.invalidChars)return this.charSpecs[e.validChars]=n,n}},put:function(e){var t;return(t=this.get(e))?t:(t=new m(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,r,n,a=this.nextStates,i=[],o=0;o<a.length;o++)t=a[o],r=t.charSpec,"undefined"!=typeof(n=r.validChars)?-1!==n.indexOf(e)&&i.push(t):"undefined"!=typeof(n=r.invalidChars)&&-1===n.indexOf(e)&&i.push(t);return i}};var I=Object.create||function(e){function t(){}return t.prototype=e,new t};S.prototype=I({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var T=function(){this.rootState=new m,this.names={}};T.prototype={add:function(e,t){for(var r,n=this.rootState,a="^",i={},o=new Array(e.length),h=[],s=!0,u=0;u<e.length;u++){var c=e[u],l=[],d=[],f=g(c.path,l,i,d);h=h.concat(f);for(var p=0;p<f.length;p++){var m=f[p];m instanceof v||(s=!1,n=n.put({invalidChars:void 0,repeat:!1,validChars:"/"}),a+="/",n=m.eachChar(n),a+=m.regex())}var C={handler:c.handler,names:l,shouldDecodes:d};o[u]=C}s&&(n=n.put({invalidChars:void 0,repeat:!1,validChars:"/"}),a+="/"),n.handlers=o,n.regex=new RegExp(a+"$"),n.specificity=i,(r=t&&t.as)&&(this.names[r]={segments:h,handlers:o})},handlersFor:function(e){var t=this.names[e];if(!t)throw new Error("There is no route named "+e);for(var r=new Array(t.handlers.length),n=0;n<t.handlers.length;n++)r[n]=t.handlers[n];return r},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var r=this.names[e],n="";if(!r)throw new Error("There is no route named "+e);for(var a=r.segments,i=0;i<a.length;i++){var o=a[i];o instanceof v||(n+="/",n+=o.generate(t))}return"/"!==n.charAt(0)&&(n="/"+n),t&&t.queryParams&&(n+=this.generateQueryString(t.queryParams,r.handlers)),n},generateQueryString:function(e,t){var r=[],n=[];for(var a in e)e.hasOwnProperty(a)&&n.push(a);n.sort();for(var i=0;i<n.length;i++){a=n[i];var o=e[a];if(null!=o){var h=encodeURIComponent(a);if(l(o))for(var s=0;s<o.length;s++){var u=a+"[]="+encodeURIComponent(o[s]);r.push(u)}else h+="="+encodeURIComponent(o),r.push(h)}}return 0===r.length?"":"?"+r.join("&")},parseQueryString:function(e){for(var t=e.split("&"),r={},n=0;n<t.length;n++){var a,i=t[n].split("="),o=x(i[0]),h=o.length,s=!1;1===i.length?a="true":(h>2&&"[]"===o.slice(h-2)&&(s=!0,o=o.slice(0,h-2),r[o]||(r[o]=[])),a=i[1]?x(i[1]):""),s?r[o].push(a):r[o]=a}return r},recognize:function(e){var t,r,n,a,i=[this.rootState],o={},h=!1;if(a=e.indexOf("#"),-1!==a&&(e=e.substr(0,a)),n=e.indexOf("?"),-1!==n){var s=e.substr(n+1,e.length);e=e.substr(0,n),o=this.parseQueryString(s)}"/"!==e.charAt(0)&&(e="/"+e);var u=e;for(T.ENCODE_AND_DECODE_PATH_SEGMENTS?e=N(e):(e=decodeURI(e),u=decodeURI(u)),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),u=u.substr(0,t-1),h=!0),r=0;r<e.length&&(i=y(i,e.charAt(r)),i.length);r++);var c=[];for(r=0;r<i.length;r++)i[r].handlers&&c.push(i[r]);i=C(c);var l=c[0];return l&&l.handlers?(h&&"(.+)$"===l.regex.source.slice(-5)&&(u+="/"),E(l,u,o)):void 0}},T.prototype.map=w,T.VERSION="0.2.0",T.ENCODE_AND_DECODE_PATH_SEGMENTS=!0,T.Normalizer=_;var z=T;"function"==typeof define&&define.amd?define("route-recognizer",function(){return z}):"undefined"!=typeof module&&module.exports?module.exports=z:"undefined"!=typeof this&&(this.RouteRecognizer=z)}).call(this);
//# sourceMappingURL=route-recognizer.min.js.map